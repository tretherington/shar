<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Species-Habitat Associations • shar</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Species-Habitat Associations">
<meta property="og:description" content="
  Analyse species-habitat associations in R. Therefore, information about the 
  location of the species is needed and about the environmental conditions. To test 
  for significance habitat associations, one of the two components is randomized. 
  Methods are mainly based on Plotkin et al. (2000) &lt;doi:10.1006/jtbi.2000.2158&gt; and 
  Harms et al. (2001) &lt;doi:10.1111/j.1365-2745.2001.00615.x&gt;.">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">shar</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.2.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="reference/index.html">
    <span class="fa fa-gears"></span>
     
    Functions
  </a>
</li>
<li>
  <a href="articles/get_started.html">
    <span class="fa fa-magic"></span>
     
    Get Started
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-graduation-cap"></span>
     
    More
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/articles/background.html">
        <span class="fa fa-book"></span>
         
        General Background
      </a>
    </li>
    <li>
      <a href="articles/articles/reconstruct_multiple_patterns.html">
        <span class="fa fa-book"></span>
         
        Reconstruct multiple pattern
      </a>
    </li>
    <li>
      <a href="articles/articles/parallelization.html">
        <span class="fa fa-book"></span>
         
        Parallelization
      </a>
    </li>
    <li>
      <a href="articles/articles/publication_record.html">
        <span class="fa fa-file-text-o"></span>
         
        Publication Record
      </a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="news/index.html">
    <span class="fa fa-newspaper-o"></span>
     
    News
  </a>
</li>
<li>
  <a href="https://github.com/r-spatialecology/shar">
    <span class="fa fa-github fa-lg"></span>
     
    Github
  </a>
</li>
<li>
  <a href="https://mhesselbarth.rbind.io">
    <span class="fa fa-user"></span>
     
    Contact
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">

<table class="table">
<thead><tr class="header">
<th>Continuous Integration</th>
<th>Development</th>
<th>CRAN</th>
<th>License</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><a href="https://github.com/r-spatialecology/shar/actions"><img src="https://github.com/r-spatialecology/shar/workflows/R-CMD-check/badge.svg" alt="R build status"></a></td>
<td><a href="https://www.repostatus.org/#active"><img src="https://www.repostatus.org/badges/latest/active.svg" alt="Project Status"></a></td>
<td><a href="https://cran.r-project.org/package=shar"><img src="https://www.r-pkg.org/badges/version/shar" alt="CRAN status"></a></td>
<td><a href="https://www.gnu.org/licenses/gpl-3.0"><img src="https://img.shields.io/badge/License-GPLv3-blue.svg" alt="License: GPL v3"></a></td>
</tr>
<tr class="even">
<td><a href="https://codecov.io/gh/r-spatialecology/shar?branch=main"><img src="https://codecov.io/gh/r-spatialecology/shar/branch/main/graph/badge.svg" alt="Coverage status"></a></td>
<td><a href="https://www.tidyverse.org/lifecycle/#stable"><img src="https://img.shields.io/badge/lifecycle-stable-brightgreen.svg" alt="Lifecycle: stable"></a></td>
<td><a href="http://cran.rstudio.com/web/packages/shar/index.html"><img src="http://cranlogs.r-pkg.org/badges/grand-total/shar" alt="CRAN logs"></a></td>
<td></td>
</tr>
</tbody>
</table>
<!-- badges: end --><p><img src="reference/figures/logo.png" align="right" width="150"></p>
<div id="shar" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#shar" class="anchor"></a>shar</h1></div>
<p><strong>S</strong>pecies-<strong>H</strong>abitat <strong>A</strong>ssociations in <strong>R</strong> is a <code>R</code> package to analyze species-habitat associations. Therefore, information about the location of the species is needed (as a point pattern) and about the environmental conditions (as a raster map). In order to analyse the data for significant habitat associations either the location data or the environmental data is randomized n-times. Then, counts within the habitats are compared between the randomized data and the observed data. Positive or negative associations are present if the observed counts is higher or lower than the randomized counts (using quantile thresholds). Methods are mainly described in Plotkin et al. (2000), Harms et al. (2001) and Wiegand &amp; Moloney (2014). <strong>shar</strong> is mainly based on the <code>spatstat</code> (Baddeley et al. 2015) and <code>raster</code> (Hijmans 2017) package.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>You can install the released version of <strong>shar</strong> from <a href="https://cran.r-project.org/web/packages/shar/index.html">CRAN</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"shar"</span><span class="op">)</span></code></pre></div>
<p>And the development version from <a href="https://github.com/r-spatialecology/shar">GitHub</a> with:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># install.packages("devtools")</span>
<span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"r-spatialecology/shar"</span><span class="op">)</span></code></pre></div>
</div>
<div id="how-to-use-shar" class="section level2">
<h2 class="hasAnchor">
<a href="#how-to-use-shar" class="anchor"></a>How to use shar</h2>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatialecology.github.io/shar/">shar</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/raster">raster</a></span><span class="op">)</span></code></pre></div>
<p><strong>shar</strong> comes with build-in example data sets. <code>species_a</code> and <code>species_b</code> are exemplary location of species, e.g. trees, as <code>ppp</code>-objects from the <code>spatstat</code> package. <code>landscape</code> contains examplary continuous environmental data. However, all methods depend on discrete data. Therefore we need to classify the data first.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">landscape_classified</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/classify_habitats.html">classify_habitats</a></span><span class="op">(</span>raster <span class="op">=</span> <span class="va">landscape</span>, classes <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></code></pre></div>
<p>There are two possibilities to randomize the environmental data, both described in Harms et al. (2001). The first shifts the habitat map in all 4 cardinal directions around a torus. The second one assigns the habitat values to an empty map using a random walk algorithm. Both functions return a list with randomized rasters and the observed one. For more information on the methods, please click <a href="https://r-spatialecology.github.io/shar/articles/background.html">here</a>.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">torus_trans</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/translate_raster.html">translate_raster</a></span><span class="op">(</span>raster <span class="op">=</span> <span class="va">landscape_classified</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>

<span class="va">random_walk</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/randomize_raster.html">randomize_raster</a></span><span class="op">(</span>raster <span class="op">=</span> <span class="va">landscape_classified</span>, n_random <span class="op">=</span> <span class="fl">39</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">col</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"#440154FF"</span>, <span class="st">"#3B528BFF"</span>, <span class="st">"#21908CFF"</span>, <span class="st">"#5DC863FF"</span>, <span class="st">"#FDE725FF"</span><span class="op">)</span>

<span class="fu"><a href="reference/plot_randomized_raster.html">plot_randomized_raster</a></span><span class="op">(</span><span class="va">torus_trans</span>, n <span class="op">=</span> <span class="fl">3</span>, col <span class="op">=</span> <span class="va">col</span><span class="op">)</span></code></pre></div>
<p><img src="reference/figures/README-plot_habitat-random-1.png" style="display: block; margin: auto;"></p>
<p>To randomize the point pattern, either use the Gamma test described by Plotkin et al. (2000) or pattern reconstruction (Tscheschel &amp; Stoyan 2006).</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">gamma_test</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/fit_point_process.html">fit_point_process</a></span><span class="op">(</span>pattern <span class="op">=</span> <span class="va">species_a</span>, process <span class="op">=</span> <span class="st">"cluster"</span>, n_random <span class="op">=</span> <span class="fl">39</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>

<span class="va">reconstruction</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/reconstruct_pattern_cluster.html">reconstruct_pattern_cluster</a></span><span class="op">(</span>pattern <span class="op">=</span> <span class="va">species_b</span>, n_random <span class="op">=</span> <span class="fl">39</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="co"># takes some time</span></code></pre></div>
<p>Of course, there are several utility functions. For example, you can plot a randomized pattern or calculate the differences between the observed pattern and the randomized patterns (using summary functions).</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="reference/plot_randomized_pattern.html">plot_randomized_pattern</a></span><span class="op">(</span><span class="va">reconstruction</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span>, ask <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></code></pre></div>
<p><img src="reference/figures/README-plot-random_pattern-1.png" style="display: block; margin: auto;"><img src="reference/figures/README-plot-random_pattern-2.png" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="reference/calculate_energy.html">calculate_energy</a></span><span class="op">(</span><span class="va">reconstruction</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
<span class="co">##  randomized_1  randomized_2  randomized_3  randomized_4  randomized_5 </span>
<span class="co">##    0.01716646    0.02080741    0.02469685    0.02252225    0.01905148 </span>
<span class="co">##  randomized_6  randomized_7  randomized_8  randomized_9 randomized_10 </span>
<span class="co">##    0.02317256    0.01467501    0.02009006    0.01796639    0.01742050 </span>
<span class="co">## randomized_11 randomized_12 randomized_13 randomized_14 randomized_15 </span>
<span class="co">##    0.01967685    0.01531558    0.01429541    0.02049072    0.01755755 </span>
<span class="co">## randomized_16 randomized_17 randomized_18 randomized_19 randomized_20 </span>
<span class="co">##    0.01672621    0.01993774    0.01695963    0.01949814    0.01368794 </span>
<span class="co">## randomized_21 randomized_22 randomized_23 randomized_24 randomized_25 </span>
<span class="co">##    0.02298234    0.01629161    0.02034008    0.01466430    0.02274970 </span>
<span class="co">## randomized_26 randomized_27 randomized_28 randomized_29 randomized_30 </span>
<span class="co">##    0.01857961    0.01489574    0.01694560    0.01860603    0.02151825 </span>
<span class="co">## randomized_31 randomized_32 randomized_33 randomized_34 randomized_35 </span>
<span class="co">##    0.01719001    0.01744145    0.01735466    0.01988854    0.02075585 </span>
<span class="co">## randomized_36 randomized_37 randomized_38 randomized_39 </span>
<span class="co">##    0.02174524    0.02042854    0.01674873    0.01900174</span></code></pre></div>
<p>The data was created that <code>species_a</code> has a negative association to habitat 4 and <code>species_b</code> has a positive association to habitat 5. At one point a positive association to one habitat leads consequently to a negative association to another habitat (and vice versa). All this can be seen in the results.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="reference/results_habitat_association.html">results_habitat_association</a></span><span class="op">(</span>pattern <span class="op">=</span> <span class="va">species_a</span>, raster <span class="op">=</span> <span class="va">torus_trans</span><span class="op">)</span>
<span class="co">## &gt; Input: randomized raster | Quantile thresholds: negative &lt; 0.025 - positive &gt; 0.975</span>
<span class="co">##   habitat count lo hi significance</span>
<span class="co">## 1       1     9  2 14         n.s.</span>
<span class="co">## 2       2    25  9 24     positive</span>
<span class="co">## 3       3    27 11 26     positive</span>
<span class="co">## 4       4     0 11 29     negative</span>
<span class="co">## 5       5    12  5 18         n.s.</span>

<span class="fu"><a href="reference/results_habitat_association.html">results_habitat_association</a></span><span class="op">(</span>pattern <span class="op">=</span> <span class="va">reconstruction</span>, raster <span class="op">=</span> <span class="va">landscape_classified</span><span class="op">)</span>
<span class="co">## &gt; Input: randomized point pattern | Quantile thresholds: negative &lt; 0.025 - positive &gt; 0.975</span>
<span class="co">##   habitat count    lo    hi significance</span>
<span class="co">## 1       1     8  1.00 23.35         n.s.</span>
<span class="co">## 2       2    22 25.85 49.10     negative</span>
<span class="co">## 3       3    33 40.80 68.05     negative</span>
<span class="co">## 4       4    19 44.00 71.10     negative</span>
<span class="co">## 5       5   118 20.85 60.05     positive</span></code></pre></div>
</div>
<div id="references" class="section level2">
<h2 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h2>
<p>Baddeley, A., Rubak, E., Turner, R. (2015). Spatial Point Patterns: Methodology and Applications with R. London:Chapman and Hall/CRC Press,</p>
<ol>
<li><a href="http://www.crcpress.com/Spatial-Point-Patterns-Methodology-and-Applications-with-R/Baddeley-Rubak-Turner/9781482210200/" class="uri">http://www.crcpress.com/Spatial-Point-Patterns-Methodology-and-Applications-with-R/Baddeley-Rubak-Turner/9781482210200/</a></li>
</ol>
<p>Harms, K. E., Condit, R., Hubbell, S. P., &amp; Foster, R. B. (2001). Habitat associations of trees and shrubs in a 50-ha neotropical forest plot. Journal of Ecology, 89(6), 947-959.</p>
<p>Hijmans, R. J. (2017). raster: Geographic Data Analysis and Modeling. R package version 2.6-7. <a href="https://CRAN.R-project.org/package=raster" class="uri">https://CRAN.R-project.org/package=raster</a></p>
<p>Plotkin, J. B., Potts, M. D., Leslie, N., Manokaran, N., LaFrankie, J. V., &amp; Ashton, P. S. (2000). Species-area curves, spatial aggregation, and habitat specialization in tropical forests. Journal of Theoretical Biology, 207(1), 81-99.</p>
<p>Tscheschel, A., &amp; Stoyan, D. (2006). Statistical reconstruction of random point patterns. Computational Statistics and Data Analysis, 51(2), 859-871.</p>
<p>Wiegand, T., &amp; Moloney, K. A. (2014). Handbook of spatial point-pattern analysis in ecology. Boca Raton: Chapman and Hall/CRC Press.</p>
</div>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=shar">https://​cloud.r-project.org/​package=shar</a>
</li>
<li>Browse source code at <br><a href="https://github.com/r-spatialecology/shar/">https://​github.com/​r-spatialecology/​shar/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/r-spatialecology/shar/issues/">https://​github.com/​r-spatialecology/​shar/​issues/​</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>GPL (&gt;= 3)</small></li>
</ul>
</div>
<div class="community">
<h2>Community</h2>
<ul class="list-unstyled">
<li><a href="CONTRIBUTING.html">Contributing guide</a></li>
<li><a href="CODE_OF_CONDUCT.html">Code of conduct</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Maximillian H.K. Hesselbarth <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0003-1125-9918" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Marco Sciaini <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0002-3042-5435" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p>Developed by Maximillian H.K. Hesselbarth, Marco Sciaini.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
